(function(){"use strict";var e={4174:function(e,s,t){var r=t(3751),o=t(5220),a=t(6278),l=(t(4603),t(7566),t(8721),t(4335));const i={apiUrl:"https://back-cloud.onrender.com"},n=l.A.create({baseURL:`${i.apiUrl}/`,withCredentials:!0}),c={me:async()=>{try{const e=await n.get("auth/me");return e.data}catch(e){return{message:"error"}}},register:async e=>{try{const s=await n.post("auth/register",e);return s.data}catch(s){return{message:"error"}}},login:async e=>{try{const s=await n.post("auth/login",e);return s.data}catch(s){return{message:"error"}}},logout:async()=>{try{const e=await n.delete("auth/logout");return e.data}catch(e){return{message:"error"}}}},d={getFiles:async e=>{try{const s=await n.get("files/",{params:{folder:e}});return s.data}catch(s){return{message:"error"}}},createFolder:async(e,s)=>{try{const t=await n.post("files/folder",{foldername:s,folder:e});return t.data}catch(t){return{message:"error"}}},deleteFolder:async e=>{try{const s=await n.delete("files/folder",{data:{folders:e}});return s.data}catch(s){return{message:"error"}}},deleteFiles:async e=>{try{const s=await n.delete("files/files",{data:{files:e}});return s.data}catch(s){return{message:"error"}}},uploadFiles:async(e,s)=>{try{const t=new FormData;s&&t.set("folder",s),e.forEach((e=>t.append("files",e)));const r=await n.post("files/upload",t);return r.data}catch(t){return{message:"error"}}},download:async e=>{try{const r=await n.post("files/download",e,{responseType:"arraybuffer"});var s=new Blob([r.data],{type:"application/zip"}),t=URL.createObjectURL(s);return window.open(t),r.data}catch(r){return{message:"error"}}}},u={state:()=>({isAuth:!1,user:null}),mutations:{async fetchAuth(e,s){e.isAuth=s.isAuth,e.user=s.user}},actions:{async register({state:e,commit:s},t){const r=await c.register(t);return r},async login({state:e,commit:s},t){const r=await c.login(t);if("success"===r.message){const e={isAuth:!0,user:r.payload.data.user};s("fetchAuth",e)}return r},async me({state:e,commit:s}){const t=await c.me();if("success"===t.message){const e={isAuth:!0,user:t.payload.data};s("fetchAuth",e)}return t},async logout({commit:e}){const s=await c.logout();if("success"===s.message){const s={isAuth:!1,user:null};e("fetchAuth",s)}return s}},namespaced:!0};t(4114);const h={state:()=>({files:[],folders:[],path:[],choosedFilesNFolders:{files:[],folders:[]}}),getters:{getPath(e){return 0===e.path.length?"/":`/${e.path.map((e=>e.foldername)).join("/")}`}},mutations:{addPath(e,s){e.path.push(s)},deletePath(e){e.path.pop()},setFiles(e,s){e.files=s},setFolders(e,s){e.folders=s},addFolder(e,s){e.folders.push(s)},addFiles(e,s){e.files.push(...s)},addChoosedFiles(e,s){const t=s.file,r=s.isRightClick,o=e.choosedFilesNFolders.files.filter((e=>e!==t));e.choosedFilesNFolders.files.length===o.length||r?e.choosedFilesNFolders={...e.choosedFilesNFolders,files:[...e.choosedFilesNFolders.files,t]}:e.choosedFilesNFolders={...e.choosedFilesNFolders,files:o}},addChoosedFolders(e,s){const t=s.folder,r=s.isRightClick,o=e.choosedFilesNFolders.folders.filter((e=>e!==t));e.choosedFilesNFolders.folders.length===o.length||r?e.choosedFilesNFolders={...e.choosedFilesNFolders,folders:[...e.choosedFilesNFolders.folders,t]}:e.choosedFilesNFolders={...e.choosedFilesNFolders,folders:o}},clearChoosedFilesNFolder(e){e.choosedFilesNFolders={files:[],folders:[]}}},actions:{async getFiles({state:e,commit:s},t=null){const r=await d.getFiles(t);"success"===r.message&&(s("setFiles",r.payload.data.files),s("setFolders",r.payload.data.folders))},async createFolder({state:e,commit:s},t=""){const r=e.path[e.path.length-1]?._id,o=await d.createFolder(r,t);"success"===o.message&&s("addFolder",o.payload.data)},async delete({state:e,commit:s,dispatch:t}){await d.deleteFolder(e.choosedFilesNFolders.folders),await d.deleteFiles(e.choosedFilesNFolders.files);await t("getFiles",e.path[e.path.length-1]?._id)},async uploadFiles({state:e,commit:s},t){const r=t.folderId?t.folderId:e.path[e.path.length-1]?._id,o=await d.uploadFiles(t.files,r);"success"!==o.message||t.folderId||s("addFiles",o.payload.data)},async downloadFilesNFolders({state:e}){const s=await d.download(e.choosedFilesNFolders);"error"===s.message&&alert("Что-то пошло не так!")}},namespaced:!0},p=(0,a.y$)({modules:{auth:u,files:h}});var f=p,m=t(641);const g=e=>((0,m.Qi)("data-v-45db8506"),e=e(),(0,m.jt)(),e),v={class:"login"},F={class:"login__container"},w=g((()=>(0,m.Lk)("div",{class:"login__header"}," Авторизация ",-1))),_={class:"login__btns"};function y(e,s,t,o,a,l){const i=(0,m.g2)("custom-input"),n=(0,m.g2)("custom-button"),c=(0,m.g2)("router-link");return(0,m.uX)(),(0,m.CE)("div",v,[(0,m.Lk)("div",F,[w,(0,m.Lk)("form",{onSubmit:s[2]||(s[2]=(0,r.D$)((()=>{}),["prevent"])),class:"login__form"},[(0,m.bF)(i,{class:"login__input",label:"Введите имя",modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=e=>a.username=e),error:a.v$.username.$error,errors:a.v$.username.$errors[0]?.$message},null,8,["modelValue","error","errors"]),(0,m.bF)(i,{class:"login__input",type:"password",label:"Введите пароль",modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=e=>a.password=e),error:a.v$.password.$error,errors:a.v$.password.$errors[0]?.$message},null,8,["modelValue","error","errors"]),(0,m.Lk)("div",_,[(0,m.bF)(n,{class:"login__btn",onClick:l.fetchLogin},{default:(0,m.k6)((()=>[(0,m.eW)("Отправить")])),_:1},8,["onClick"]),(0,m.bF)(c,{to:"/register"},{default:(0,m.k6)((()=>[(0,m.eW)("Создать")])),_:1})])],32)])])}var k=t(9639),C=t(3855);const b={class:"button"},$={class:"button__item"};function L(e,s,t,r,o,a){return(0,m.uX)(),(0,m.CE)("div",b,[(0,m.Lk)("button",$,[(0,m.RG)(e.$slots,"default",{},void 0,!0)])])}var x={name:"custom-button",props:{}},P=t(6262);const E=(0,P.A)(x,[["render",L],["__scopeId","data-v-33d684ce"]]);var A=E,M={components:{CustomButton:A},data(){return{v$:(0,k.Ay)(),username:"",password:""}},validations(){return{username:{required:C._$.withMessage("Необходимое поле",C.mw),minLength:C._$.withMessage("Имя слишком короткое",(0,C.Bp)(3)),maxLength:C._$.withMessage("Имя слишком длинное",(0,C.Ru)(30))},password:{required:C._$.withMessage("Необходимое поле",C.mw),minLength:C._$.withMessage("Пароль слишком короткий",(0,C.Bp)(3))}}},methods:{...(0,a.i0)({login:"auth/login"}),async fetchLogin(){if(this.v$.$validate(),this.v$.$error)return;const e={username:this.username,password:this.password},s=await this.login(e);"success"===s.message?this.$router.push("/"):alert("Что-то пошло не так!")}}};const N=(0,P.A)(M,[["render",y],["__scopeId","data-v-45db8506"]]);var V=N;const I=e=>((0,m.Qi)("data-v-07ae3270"),e=e(),(0,m.jt)(),e),X={class:"register"},H={class:"register__container"},S=I((()=>(0,m.Lk)("div",{class:"register__header"}," Регистрация ",-1))),B={class:"register__btns"};function D(e,s,t,o,a,l){const i=(0,m.g2)("custom-input"),n=(0,m.g2)("custom-button"),c=(0,m.g2)("router-link");return(0,m.uX)(),(0,m.CE)("div",X,[(0,m.Lk)("div",H,[S,(0,m.Lk)("form",{onSubmit:s[3]||(s[3]=(0,r.D$)((()=>{}),["prevent"])),class:"register__form"},[(0,m.bF)(i,{class:"register__input",label:"Введите имя",modelValue:a.username,"onUpdate:modelValue":s[0]||(s[0]=e=>a.username=e),error:a.v$.username.$error,errors:a.v$.username.$errors[0]?.$message},null,8,["modelValue","error","errors"]),(0,m.bF)(i,{class:"register__input",type:"password",label:"Введите пароль",modelValue:a.password,"onUpdate:modelValue":s[1]||(s[1]=e=>a.password=e),error:a.v$.password.$error,errors:a.v$.password.$errors[0]?.$message},null,8,["modelValue","error","errors"]),(0,m.bF)(i,{class:"register__input",type:"password",label:"Повторите пароль",modelValue:a.confirmPassword,"onUpdate:modelValue":s[2]||(s[2]=e=>a.confirmPassword=e),error:a.v$.confirmPassword.$error,errors:a.v$.confirmPassword.$errors[0]?.$message},null,8,["modelValue","error","errors"]),(0,m.Lk)("div",B,[(0,m.bF)(n,{class:"register__btn",onClick:l.fetchRegister},{default:(0,m.k6)((()=>[(0,m.eW)("Отправить")])),_:1},8,["onClick"]),(0,m.bF)(c,{to:"/login"},{default:(0,m.k6)((()=>[(0,m.eW)("Войти")])),_:1})])],32)])])}var O={data(){return{v$:(0,k.Ay)(),username:"",password:"",confirmPassword:""}},validations(){return{username:{required:C._$.withMessage("Необходимое поле",C.mw),minLength:C._$.withMessage("Имя слишком короткое",(0,C.Bp)(3)),maxLength:C._$.withMessage("Имя слишком длинное",(0,C.Ru)(30))},password:{required:C._$.withMessage("Необходимое поле",C.mw),minLength:C._$.withMessage("Пароль слишком короткий",(0,C.Bp)(3))},confirmPassword:{sameAs:C._$.withMessage("Пароли должны совпадать",(0,C.f4)(this.password))}}},methods:{...(0,a.i0)({register:"auth/register"}),async fetchRegister(){if(this.v$.$validate(),this.v$.$error)return;const e={username:this.username,password:this.password,confirmPassword:this.confirmPassword},s=await this.register(e);"success"===s.message?this.$router.push("/login"):alert("Что-то пошло не так!")}}};const j=(0,P.A)(O,[["render",D],["__scopeId","data-v-07ae3270"]]);var z=j,R=t(33);const U={class:"main"},W={class:"main__path"},Q={key:0};function q(e,s,t,o,a,l){const i=(0,m.g2)("folder"),n=(0,m.g2)("file"),c=(0,m.g2)("custom-menu"),d=(0,m.g2)("header-layout");return(0,m.uX)(),(0,m.Wv)(d,null,{default:(0,m.k6)((()=>[(0,m.Lk)("div",U,[(0,m.Lk)("div",W,[(0,m.Lk)("span",{onClick:s[0]||(s[0]=(...e)=>l.clickBack&&l.clickBack(...e))},"Назад"),(0,m.eW)(" "+(0,R.v_)(e.getPath),1)]),(0,m.Lk)("div",{class:"main__container",onContextmenu:s[2]||(s[2]=(0,r.D$)(((...e)=>l.openmenu&&l.openmenu(...e)),["prevent"])),onDragenter:s[3]||(s[3]=(0,r.D$)((()=>{}),["prevent"])),onDragover:s[4]||(s[4]=(0,r.D$)((()=>{}),["prevent"])),onDrop:s[5]||(s[5]=(...e)=>l.onDragDrop&&l.onDragDrop(...e))},[e.files[0]||e.folders[0]||a.isCreatingFolder?(0,m.Q3)("",!0):((0,m.uX)(),(0,m.CE)("div",Q," Перетащите сюда файлы ")),(0,m.Lk)("div",{class:"main__items",onClick:s[1]||(s[1]=(...e)=>l.clickedItem&&l.clickedItem(...e))},[((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)(e.folders,(e=>((0,m.uX)(),(0,m.Wv)(i,{key:e._id,folder:e},null,8,["folder"])))),128)),((0,m.uX)(!0),(0,m.CE)(m.FK,null,(0,m.pI)(e.files,(e=>((0,m.uX)(),(0,m.Wv)(n,{key:e._id,file:e},null,8,["file"])))),128)),a.isCreatingFolder?((0,m.uX)(),(0,m.Wv)(i,{key:0,isCreating:a.isCreatingFolder,onCreate:l.createFolderByEmit},null,8,["isCreating","onCreate"])):(0,m.Q3)("",!0)])],32)]),(0,m.bF)(c,{type:a.type,isShow:a.isShowMenu,mousePosition:a.cursorPosition,onCreateFolder:s[6]||(s[6]=e=>this.isCreatingFolder=!0),onDelete:l.clearClick},null,8,["type","isShow","mousePosition","onDelete"])])),_:1})}const T=e=>((0,m.Qi)("data-v-f1007fd8"),e=e(),(0,m.jt)(),e),K={class:"app"},G={class:"app__container"},Y={class:"header"},J=T((()=>(0,m.Lk)("div",null,null,-1))),Z={class:"header__card card"},ee={class:"card__name"},se={class:"app__body"};function te(e,s,t,r,o,a){const l=(0,m.g2)("icon-exit");return(0,m.uX)(),(0,m.CE)("div",K,[(0,m.Lk)("div",G,[(0,m.Lk)("header",Y,[J,(0,m.Lk)("div",Z,[(0,m.Lk)("span",ee,(0,R.v_)(e.user?.username),1),(0,m.bF)(l,{class:"icon__exit",onClick:a.fetchLogout},null,8,["onClick"])])]),(0,m.Lk)("div",se,[(0,m.RG)(e.$slots,"default",{},void 0,!0)])])])}const re={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.005 512.005"},oe=(0,m.Lk)("g",null,[(0,m.Lk)("path",{d:"M192,256.003c0-35.285,28.715-64,64-64h85.333V21.336c0-11.776-9.536-21.333-21.333-21.333H21.333\r\n                C9.536,0.003,0,9.56,0,21.336v469.333c0,11.776,9.536,21.333,21.333,21.333H320c11.797,0,21.333-9.557,21.333-21.333V341.336\r\n                v-21.333H256C220.715,320.003,192,291.288,192,256.003z"}),(0,m.Lk)("path",{d:"M507.201,269.48c0.065-0.079,0.119-0.164,0.182-0.244c0.366-0.462,0.721-0.933,1.048-1.425\r\n                c0.154-0.23,0.284-0.47,0.428-0.705c0.216-0.353,0.437-0.703,0.632-1.069c0.161-0.3,0.296-0.61,0.441-0.916\r\n                c0.15-0.317,0.309-0.629,0.444-0.954c0.145-0.35,0.263-0.707,0.388-1.062c0.104-0.295,0.219-0.585,0.31-0.886\r\n                c0.127-0.418,0.224-0.841,0.325-1.264c0.059-0.248,0.131-0.491,0.182-0.742c0.117-0.581,0.199-1.166,0.267-1.753\r\n                c0.012-0.101,0.033-0.199,0.043-0.301c0.145-1.434,0.145-2.88,0-4.314c-0.01-0.102-0.032-0.2-0.043-0.301\r\n                c-0.068-0.587-0.151-1.172-0.267-1.753c-0.05-0.251-0.122-0.494-0.182-0.742c-0.101-0.423-0.198-0.847-0.325-1.264\r\n                c-0.091-0.301-0.206-0.591-0.31-0.886c-0.126-0.355-0.243-0.713-0.388-1.062c-0.135-0.325-0.293-0.637-0.444-0.954\r\n                c-0.145-0.306-0.28-0.615-0.441-0.916c-0.196-0.366-0.416-0.716-0.632-1.069c-0.144-0.235-0.274-0.475-0.428-0.705\r\n                c-0.327-0.492-0.682-0.963-1.048-1.425c-0.063-0.08-0.117-0.164-0.182-0.244c-0.48-0.589-0.991-1.151-1.531-1.685l-85.254-85.254\r\n                c-8.341-8.341-21.824-8.341-30.165,0c-8.341,8.341-8.341,21.824,0,30.165l48.917,48.917H256\r\n                c-11.797,0-21.333,9.557-21.333,21.333c0,11.776,9.536,21.333,21.333,21.333h183.168l-48.917,48.917\r\n                c-8.341,8.341-8.341,21.824,0,30.165c4.16,4.16,9.621,6.251,15.083,6.251c5.461,0,10.923-2.091,15.083-6.251l85.254-85.254\r\n                C506.209,270.631,506.72,270.069,507.201,269.48z"})],-1),ae=[oe];function le(e,s,t,r,o,a){return(0,m.uX)(),(0,m.CE)("svg",re,ae)}var ie={};const ne=(0,P.A)(ie,[["render",le]]);var ce=ne,de={components:{IconExit:ce},methods:{...(0,a.i0)({logout:"auth/logout"}),async fetchLogout(){await this.logout(),this.$router.push("/login")}},computed:{...(0,a.aH)({isAuth:e=>e.auth.isAuth,user:e=>e.auth.user})}};const ue=(0,P.A)(de,[["render",te],["__scopeId","data-v-f1007fd8"]]);var he=ue;const pe=["src"];function fe(e,s,t,r,o,a){const l=(0,m.g2)("icon-txt");return(0,m.uX)(),(0,m.CE)("div",{class:(0,R.C4)(["file",[t.file?._id,-1!==e.choosedFiles.indexOf(t.file?._id)?"file_active":""]])},[-1!==t.file.mimetype.search("image")?((0,m.uX)(),(0,m.CE)("img",{key:0,alt:"image",src:a.imageSrc,class:"image"},null,8,pe)):((0,m.uX)(),(0,m.Wv)(l,{key:1,class:"icon icon__txt"})),(0,m.Lk)("span",null,(0,R.v_)(t.file.filename.length>50?`${t.file.filename.slice(0,50)}...`:t.file.filename),1)],2)}const me={version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 58 58",style:{"enable-background":"new 0 0 58 58"},"xml:space":"preserve"},ge=(0,m.Lk)("path",{style:{fill:"#EFCE4A"},d:"M46.324,52.5H1.565c-1.03,0-1.779-0.978-1.51-1.973l10.166-27.871\r\n\t    c0.184-0.682,0.803-1.156,1.51-1.156H56.49c1.03,0,1.51,0.984,1.51,1.973L47.834,51.344C47.65,52.026,47.031,52.5,46.324,52.5z"},null,-1),ve=(0,m.Lk)("g",null,[(0,m.Lk)("path",{style:{fill:"#EBBA16"},d:"M50.268,12.5H25l-5-7H1.732C0.776,5.5,0,6.275,0,7.232V49.96c0.069,0.002,0.138,0.006,0.205,0.01\r\n            l10.015-27.314c0.184-0.683,0.803-1.156,1.51-1.156H52v-7.268C52,13.275,51.224,12.5,50.268,12.5z"})],-1),Fe=[ge,ve];function we(e,s,t,r,o,a){return(0,m.uX)(),(0,m.CE)("svg",me,Fe)}var _e={};const ye=(0,P.A)(_e,[["render",we]]);var ke=ye;const Ce={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 309.267 309.267"},be=(0,m.Lk)("g",null,[(0,m.Lk)("path",{style:{fill:"#E4E7E7"},d:"M38.658,0h164.23l87.049,86.711v203.227c0,10.679-8.659,19.329-19.329,19.329H38.658\r\n                c-10.67,0-19.329-8.65-19.329-19.329V19.329C19.329,8.65,27.989,0,38.658,0z"}),(0,m.Lk)("path",{style:{fill:"#C2C5C7"},d:"M289.658,86.981h-67.372c-10.67,0-19.329-8.659-19.329-19.329V0.193L289.658,86.981z"}),(0,m.Lk)("path",{style:{fill:"#CCD0D2"},d:"M57.988,125.64v19.329H251.28V125.64H57.988z M57.988,183.637H251.28v-19.329H57.988V183.637z\r\n                M57.988,222.286H251.28v-19.329H57.988V222.286z M57.988,260.944H251.28v-19.32H57.988V260.944z M164.298,86.981H57.988v19.329\r\n                h106.311L164.298,86.981L164.298,86.981z M164.298,48.323H57.988v19.329h106.311L164.298,48.323L164.298,48.323z"})],-1),$e=[be];function Le(e,s,t,r,o,a){return(0,m.uX)(),(0,m.CE)("svg",Ce,$e)}var xe={};const Pe=(0,P.A)(xe,[["render",Le]]);var Ee=Pe,Ae={components:{IconFolder:ke,IconTxt:Ee},props:{file:Object},methods:{...(0,a.i0)({getFiles:"getFiles"})},computed:{...(0,a.aH)({choosedFiles:e=>e.files.choosedFilesNFolders.files}),imageSrc:function(){return`${i.apiUrl}/${this.file.uploadname}`}}};const Me=(0,P.A)(Ae,[["render",fe],["__scopeId","data-v-91fe04c6"]]);var Ne=Me;const Ve={key:0};function Ie(e,s,t,o,a,l){const i=(0,m.g2)("icon-folder"),n=(0,m.gN)("focus");return(0,m.uX)(),(0,m.CE)("div",{class:(0,R.C4)(["folder",[t.folder?._id,-1!==e.choosedFolders.indexOf(t.folder?._id)?"folder_active":""]]),onClick:s[3]||(s[3]=(...e)=>l.clickedFolder&&l.clickedFolder(...e))},[(0,m.bF)(i,{class:"icon icon__folder"}),t.isCreating?(0,m.bo)(((0,m.uX)(),(0,m.CE)("input",{key:1,class:"folder__input","onUpdate:modelValue":s[0]||(s[0]=e=>a.input=e),onKeyup:s[1]||(s[1]=(0,r.jR)((e=>e.target.blur()),["enter"])),onBlur:s[2]||(s[2]=(...e)=>l.createFolder&&l.createFolder(...e))},null,544)),[[r.Jo,a.input],[n]]):((0,m.uX)(),(0,m.CE)("span",Ve,(0,R.v_)(t.folder.foldername.length>50?`${t.folder.foldername.slice(0,50)}...`:t.folder.foldername),1))],2)}var Xe={components:{IconFolder:ke},props:{folder:Object,isCreating:Boolean},data(){return{input:""}},methods:{...(0,a.PY)({addPath:"files/addPath"}),createFolder(){this.$emit("create",this.input)},clickedFolder(e){const s=e.ctrlKey;s||this.addPath(this.folder)}},computed:{...(0,a.aH)({choosedFolders:e=>e.files.choosedFilesNFolders.folders})}};const He=(0,P.A)(Xe,[["render",Ie],["__scopeId","data-v-e78245a8"]]);var Se=He,Be={components:{HeaderLayout:he,File:Ne,Folder:Se},data(){return{isShowMenu:!1,cursorPosition:[],type:null,isCreatingFolder:!1}},methods:{...(0,a.i0)({getFiles:"files/getFiles",createFolder:"files/createFolder",uploadFiles:"files/uploadFiles"}),...(0,a.PY)({deletePath:"files/deletePath",addChoosedFiles:"files/addChoosedFiles",addChoosedFolders:"files/addChoosedFolders",clearChoosedFilesNFolder:"files/clearChoosedFilesNFolder"}),clickedItem(e){e.stopPropagation();const s=e.ctrlKey;s?e.target.closest(".folder")?this.addChoosedFolders({folder:e.target.closest(".folder")?.classList[1]}):e.target.closest(".file")&&this.addChoosedFiles({file:e.target.closest(".file")?.classList[1]}):this.clearClick()},openmenu(e){if(this.type=null,e.target.closest(".folder")){this.type="folder";const s=e.target.closest(".folder")?.classList[1];this.addChoosedFolders({folder:s,isRightClick:!0})}else if(e.target.closest(".file")){this.type="file";const s=e.target.closest(".file")?.classList[1];this.addChoosedFiles({file:s,isRightClick:!0})}this.isShowMenu?this.clearClick():(this.isShowMenu=!this.isShowMenu,this.cursorPosition=[e.pageX,e.pageY])},clearClick(e){this.isShowMenu=!1,this.clearChoosedFilesNFolder()},async createFolderByEmit(e){this.isCreatingFolder=!1,await this.createFolder(e)},onDragDrop(e){e.preventDefault();const s=10485760,t=e.dataTransfer.files,r=[...t].filter((e=>""!==e.type&&e.size<=s));if(e.target.closest(".folder")){const s=e.target.closest(".folder")?.classList[1];this.uploadFiles({files:r,folderId:s})}else this.uploadFiles({files:r})},clickBack(e){this.deletePath()}},computed:{...(0,a.aH)({files:e=>e.files.files,folders:e=>e.files.folders,path:e=>e.files.path}),...(0,a.L8)({getPath:"files/getPath"})},mounted(){this.getFiles(),document.addEventListener("click",this.clearClick),this.$store.watch((e=>e.files.path),((e,s)=>{this.getFiles(s[s.length-1]?._id)}),{deep:!0})},beforeUnmount(){document.removeEventListener("click",this.clearClick)}};const De=(0,P.A)(Be,[["render",q],["__scopeId","data-v-31b34eea"]]);var Oe=De;const je=[{path:"/login",component:V},{path:"/register",component:z},{path:"/",component:Oe,meta:{auth:!0}},{path:"/:catchAll(.*)",redirect:"/"}],ze=(0,o.aE)({routes:je,history:(0,o.Bt)("/front-cloud/")});ze.beforeEach((async(e,s,t)=>{const r=await f.dispatch("auth/me"),o=e.matched.some((e=>e.meta.auth));"error"===r.message&&o?t("/login"):"success"!==r.message||"/login"!==e.path&&"/register"!==e.path?t():t("/")}));var Re=ze;function Ue(e,s,t,r,o,a){const l=(0,m.g2)("router-view");return(0,m.uX)(),(0,m.CE)("div",null,[(0,m.bF)(l)])}var We={};const Qe=(0,P.A)(We,[["render",Ue]]);var qe=Qe;const Te=e=>((0,m.Qi)("data-v-b9c04072"),e=e(),(0,m.jt)(),e),Ke={class:"input"},Ge={class:"input__wrapped"},Ye=["value","type"],Je=Te((()=>(0,m.Lk)("div",{class:"input__line"},null,-1))),Ze={key:0,class:"input__errorMessage"};function es(e,s,t,r,o,a){return(0,m.uX)(),(0,m.CE)("div",Ke,[(0,m.Lk)("div",Ge,[(0,m.Lk)("input",{class:(0,R.C4)(["input__item",{input__item_hide:!o.reposPlaceholder}]),value:t.modelValue,onInput:s[0]||(s[0]=(...e)=>a.updateInput&&a.updateInput(...e)),type:t.type},null,42,Ye),(0,m.Lk)("span",{class:(0,R.C4)(["input__placeholder",{input__placeholder_error:t.error}])},(0,R.v_)(t.label),3)]),Je,t.error?((0,m.uX)(),(0,m.CE)("span",Ze,(0,R.v_)(t.errors),1)):(0,m.Q3)("",!0)])}var ss={name:"custom-input",props:{modelValue:[String,Number],label:{type:String,required:!0},type:{type:String,default:"text"},error:{type:Boolean,default:!1},errors:{type:String,default:""}},data(){return{reposPlaceholder:!0}},methods:{updateInput(e){""!==e.target.value?this.reposPlaceholder=!1:this.reposPlaceholder=!0,this.$emit("update:modelValue",e.target.value)}}};const ts=(0,P.A)(ss,[["render",es],["__scopeId","data-v-b9c04072"]]);var rs=ts;const os={ref:"menu",class:"menu"},as={class:"menu__items"};function ls(e,s,t,o,a,l){return(0,m.bo)(((0,m.uX)(),(0,m.CE)("div",os,[(0,m.Lk)("div",as,[t.type?(0,m.Q3)("",!0):((0,m.uX)(),(0,m.CE)("span",{key:0,class:"menu__item",onClick:s[0]||(s[0]=(...e)=>l.create&&l.create(...e))}," Создать папку ")),(0,m.Lk)("span",{class:"menu__item",onClick:s[1]||(s[1]=(...e)=>l.download&&l.download(...e))}," Скачать "),(0,m.Lk)("span",{class:"menu__item",onClick:s[2]||(s[2]=(...e)=>l.deleteClick&&l.deleteClick(...e))}," Удалить ")])],512)),[[r.aG,t.isShow]])}var is={name:"custom-menu",props:{isShow:Boolean,mousePosition:{type:Array,required:!0},type:{required:!0}},methods:{...(0,a.i0)({delete:"files/delete",downloadFilesNFolders:"files/downloadFilesNFolders"}),create(){this.$emit("create-folder")},async deleteClick(e){e.stopPropagation(),await this.delete(),this.$emit("delete")},download(e){this.downloadFilesNFolders()}},watch:{isShow:function(e){this.$refs.menu.style.left=this.mousePosition[0]+"px",this.$refs.menu.style.top=this.mousePosition[1]+"px"}}};const ns=(0,P.A)(is,[["render",ls],["__scopeId","data-v-110f43c4"]]);var cs=ns,ds=[rs,A,cs],us={mounted:function(e){e.focus()}};const hs=(0,r.Ef)(qe);ds.forEach((e=>{hs.component(e.name,e)})),hs.directive("focus",us),hs.use(Re).use(f).mount("#app")}},s={};function t(r){var o=s[r];if(void 0!==o)return o.exports;var a=s[r]={exports:{}};return e[r].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(s,r,o,a){if(!r){var l=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],a=e[d][2];for(var i=!0,n=0;n<r.length;n++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](r[n])}))?r.splice(n--,1):(i=!1,a<l&&(l=a));if(i){e.splice(d--,1);var c=o();void 0!==c&&(s=c)}}return s}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]}}(),function(){t.d=function(e,s){for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(s){return 0===e[s]};var s=function(s,r){var o,a,l=r[0],i=r[1],n=r[2],c=0;if(l.some((function(s){return 0!==e[s]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(n)var d=n(t)}for(s&&s(r);c<l.length;c++)a=l[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))}();var r=t.O(void 0,[504],(function(){return t(4174)}));r=t.O(r)})();
//# sourceMappingURL=app.a0c6109a.js.map